(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1037:function(e,t,o){"use strict";o.r(t);var r=o(0),n=o.n(r),i=(o(2),o(1)),a=o.n(i),c=(o(1485),o(13)),s=o.n(c),u=o(1051),l=o.n(u);o(1483);o(1480),o(1479),o(1478);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(o,!0).forEach(function(t){b(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"DqEditor",function(){return k}),o(1491),o(1489),o(1487),o(1482);var g=/[a-zA-Z_$][\w_$]*/,v=function(e){for(var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=new RegExp(g,"g");t=n.exec(e);)o[t[0]]||(o[t[0]]=!0,r.push(t[0]));return r},w=function(e){for(var t=e.getCursor(),o=e.getLine(t.line),r=t.ch,n=r;n>0&&g.test(o.charAt(n-1));)--n;return n!==r&&o.slice(n,r)},O=2,k=function(e){function t(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return b(h(o=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?h(e):t}(this,(e=m(t)).call.apply(e,[this].concat(n)))),"state",{modes_loaded:{},options:{}}),b(h(o),"return_mode",function(){return o.state.modes_loaded[o.props.mode]||"python"}),b(h(o),"check_if_autocomplete",function(e,t){t.key.length>1||!e.state.completionActive&&/[a-zA-Z_."']/.test(t.key)&&o.props.codemirror.commands.autocomplete(e,null,{completeSingle:!1,generalKey:!0})}),b(h(o),"get_words",function(e){var t=[],r=e.getHelper(e.getCursor(),"hintWords");r&&(t=r);var n=t.reduce(function(e,t){return e[t]=!0,e},{});return(t=(t=t.concat(v(o.props.value,n))).concat(v(o.props.autocomplete_extra_text,n))).sort(),t}),b(h(o),"autocomplete",function(e,t){var r=o.get_words(e),n=e.getCursor();if(!t.generalKey)return{list:r,from:n,to:n};var i=w(e);if(i&&!(i.length<O)){a.a.pull(r,i);var c=i.toLowerCase();return{list:r.filter(function(e){return a.a.startsWith(e.toLowerCase(),c)}),from:o.props.codemirror.Pos(n.line,n.ch-i.length),to:n}}}),b(h(o),"set_mode_loaded",function(e,t){o._still_mounted&&(o.setState({modes_loaded:d({},o.state.modes_loaded,b({},e,t))}),o.set_options(o.props,t))}),b(h(o),"handle_value_change",function(e,t){null!=o.props.onChange&&"setValue"!==t.origin&&o.props.onChange(e.getValue())}),b(h(o),"set_text_area_ref",function(e){o._textarea_ref=e}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,n.a.PureComponent),function(e,t,o){t&&_(e.prototype,t),o&&_(e,o)}(t,[{key:"componentWillMount",value:function(){this._still_mounted=!0,this.set_options(),this.props.load_mode(this.props.mode,this.set_mode_loaded)}},{key:"componentDidMount",value:function(){var e=this,t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?100:0;setTimeout(function(){null!=e._textarea_ref&&null!=e._still_mounted&&(e._codemirror_ref=e.props.codemirror.fromTextArea(e._textarea_ref,e.state.options),e._codemirror_ref.on("change",e.handle_value_change),e._codemirror_ref.setValue(e.props.value),e.props.extra_codemirror_setup&&e.props.extra_codemirror_setup(e._codemirror_ref),!e.props.readOnly&&e.props.autocomplete&&e._codemirror_ref.on("keyup",e.check_if_autocomplete))},t)}},{key:"componentWillReceiveProps",value:function(e){var t=["onDark","mode","wrapLines","readOnly","lineNumbers","extra_codemirror_options"];a.a.isEqual(a.a.pick(e,t),a.a.pick(this.props,t))||this.set_options(e),this._codemirror_ref&&e.value!==this._codemirror_ref.getValue()&&this._codemirror_ref.setValue(e.value)}},{key:"componentWillUnmount",value:function(){this._codemirror_ref&&this._codemirror_ref.toTextArea(),delete this._still_mounted}},{key:"tab_mapping",value:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertSoftTab")}},{key:"shift_tab_mapping",value:function(e){e.indentSelection("subtract")}},{key:"toggle_comment",value:function(e){e.toggleComment({indent:!0})}},{key:"set_options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.return_mode(),o=s()(d({lineWrapping:e.wrapLines,mode:t,theme:e.onDark?"dq-dark":"dq-light",cursorBlinkRate:e.readOnly?-1:530},a.a.pick(e,["readOnly"]),{lineNumbers:e.lineNumbers,indentUnit:4,extraKeys:{Tab:this.tab_mapping,"Shift-Tab":this.shift_tab_mapping,"Ctrl-Space":e.readOnly?"":"autocomplete","Ctrl-/":this.toggle_comment,"Cmd-/":this.toggle_comment},hintOptions:{hint:this.autocomplete}})).merge(this.props.extra_codemirror_options,{deep:!0});this.setState({options:o}),this.apply_options(o)}},{key:"apply_options",value:function(e){var t=this;null!=this._codemirror_ref&&a.a.forEach(e,function(e,o){var r=t._codemirror_ref.getOption(o);a.a.isEqual(r,e)||t._codemirror_ref.setOption(o,e)})}},{key:"render",value:function(){return n.a.createElement("div",{className:"dq_theme "+a.a.defaultTo(this.props.className,"")+" DqEditor__root"},n.a.createElement("textarea",{ref:this.set_text_area_ref,defaultValue:this.props.value,autoComplete:"off"}))}}]),t}();b(k,"defaultProps",{value:"",onDark:!1,mode:"python",wrapLines:!0,readOnly:!1,lineNumbers:!0,extra_codemirror_options:{},autocomplete_extra_text:"",load_mode:function(e,t){switch(e.toLowerCase()){case"r":o.e(30).then(function(){o(1509),t(e,"r")}.bind(null,o)).catch(o.oe);break;case"sql":o.e(22).then(function(){o(1508),t(e,"text/x-sql")}.bind(null,o)).catch(o.oe);break;case"regex":o.e(29).then(function(){o(1507),t(e,"text/x-regex")}.bind(null,o)).catch(o.oe);break;case"text":t(e,"text/plain");break;case"":case"python":case"python 3":t(e,"python");break;default:console.warn('Falling back to Python. Mode tried was "'+e+'"'),t(e,"python")}},codemirror:l.a,autocomplete:!0}),k.displayName="DqEditor";t.default=k},1485:function(e,t,o){e.exports={root:"DqEditor__root"}},1487:function(e,t,o){},1489:function(e,t,o){}}]);
//# sourceMappingURL=DqEditor.ef8e247bfd1c12e85a07.js.map